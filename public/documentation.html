<!DOCTYPE html>
<html lang="az" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />

  <title>LNK.az API Sənədləri</title>
  <meta name="description" content="LNK.az API Sənədləri - Media qərəzi və etibarlılıq təhlili üçün API" />
  <meta name="theme-color" content="#0c0d12">
  <meta name="color-scheme" content="light dark" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
  <link rel="alternate icon" href="/static/favicon.ico">
  <link rel="icon" href="/static/favicon-light.svg" media="(prefers-color-scheme: light)">
  <link rel="icon" href="/static/favicon-dark.svg"  media="(prefers-color-scheme: dark)">
  <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">

  <link rel="stylesheet" href="/static/styles.css">
  
  <style>
    /* Documentation-specific styles that extend the main design system */
    .doc-header {
      text-align: center;
      margin-bottom: 2rem;
      padding: 2rem;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-2) 100%);
      color: white;
      border-radius: 12px;
    }
    
    .doc-header h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      font-weight: 700;
    }
    
    .doc-header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    .api-section {
      margin-bottom: 2rem;
    }
    
    .api-section h2 {
      background: var(--panel);
      padding: 1.5rem;
      margin: 0 0 0 0;
      border-bottom: 1px solid var(--border);
      color: var(--text);
      font-size: 1.5rem;
      border-radius: 12px 12px 0 0;
    }
    
    .api-endpoint {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      background: var(--card);
    }
    
    .api-endpoint:last-child {
      border-bottom: none;
      border-radius: 0 0 12px 12px;
    }
    
    .endpoint-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }
    
    .method {
      padding: 0.25rem 0.75rem;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.875rem;
      min-width: 60px;
      text-align: center;
    }
    
    .method.get { 
      background: color-mix(in oklab, var(--accent) 20%, var(--panel) 80%); 
      color: var(--accent);
      border: 1px solid var(--accent);
    }
    .method.post { 
      background: color-mix(in oklab, #007bff 20%, var(--panel) 80%); 
      color: #007bff;
      border: 1px solid #007bff;
    }
    
    .endpoint-url {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      background: var(--panel);
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      font-size: 1rem;
      border: 1px solid var(--border);
      flex: 1;
    }
    
    .endpoint-description {
      margin-bottom: 1rem;
      color: var(--muted);
      font-size: 1rem;
    }
    
    .parameters {
      margin-bottom: 1rem;
    }
    
    .parameters h4 {
      margin-bottom: 0.5rem;
      color: var(--text);
      font-size: 1.1rem;
    }
    
    .param-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      background: var(--card);
      border-radius: 8px;
      overflow: hidden;
    }
    
    .param-table th,
    .param-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    
    .param-table th {
      background: var(--panel);
      font-weight: 600;
      color: var(--text);
    }
    
    .param-name {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      background: var(--panel);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      border: 1px solid var(--border);
    }
    
    .param-required {
      color: var(--danger);
      font-weight: 600;
    }
    
    .param-optional {
      color: var(--muted);
    }
    
    .example {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      margin-top: 1rem;
    }
    
    .example h4 {
      margin-bottom: 0.5rem;
      color: var(--text);
    }
    
    .code-block {
      background: var(--bg);
      color: var(--text);
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9rem;
      line-height: 1.4;
      border: 1px solid var(--border);
    }
    
    .response-example {
      background: color-mix(in oklab, var(--accent) 5%, var(--panel) 95%);
      border-left: 4px solid var(--accent);
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 0 8px 8px 0;
    }
    
    .response-example h4 {
      margin-bottom: 0.5rem;
      color: var(--accent);
    }
    
    .toc {
      background: var(--panel);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      border: 1px solid var(--border);
    }
    
    .toc h3 {
      margin-bottom: 1rem;
      color: var(--text);
    }
    
    .toc ul {
      list-style: none;
      padding: 0;
    }
    
    .toc li {
      margin-bottom: 0.5rem;
    }
    
    .toc a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s ease;
    }
    
    .toc a:hover {
      color: var(--accent-2);
      text-decoration: underline;
    }
    
    .warning {
      background: color-mix(in oklab, var(--warning-color) 10%, var(--panel) 90%);
      border: 1px solid var(--warning-color);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
      color: var(--warning-text);
    }
    
    .info {
      background: color-mix(in oklab, #007bff 10%, var(--panel) 90%);
      border: 1px solid #007bff;
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
      color: var(--text);
    }
    
    .info code {
      background: var(--bg);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div id="site-header"></div>
    <main id="main" role="main">
      <div class="documentation">
        <div class="doc-header">
          <h1>LNK.az API Sənədləri</h1>
          <p>Tərtibatçılar üçün media qərəzi və etibarlılıq təhlili API-si</p>
        </div>

        <div class="toc">
          <h3>Mündəricat</h3>
          <ul>
            <li><a href="#overview">Ümumi Baxış</a></li>
            <li><a href="#authentication">Autentifikasiya</a></li>
            <li><a href="#rate-limits">Sürət Limitləri</a></li>
            <li><a href="#analysis-apis">Təhlil API-ləri</a></li>
            <li><a href="#data-apis">Məlumat və Statistika API-ləri</a></li>
            <li><a href="#utility-apis">Köməkçi API-lər</a></li>
            <li><a href="#response-formats">Cavab Formatları</a></li>
            <li><a href="#error-handling">Səhv İdarəetməsi</a></li>
            <li><a href="#examples">Kod Nümunələri</a></li>
          </ul>
        </div>

        <div class="api-section" id="overview">
          <h2>Ümumi Baxış</h2>
          <div class="api-endpoint">
            <p>LNK.az media qərəzini və etibarlılığını təhlil etmək üçün geniş imkanlara malik API təqdim edir. API xəbər məqalələrini qiymətləndirmək və etibarlılıq göstəriciləri, siyasi qərəz analizi və mənbə istinadları daxil olmaqla ətraflı təhlil təmin etmək üçün qabaqcıl süni intellekt modellərindən istifadə edir.</p>

            <div class="info">
              <strong>Əsas URL:</strong> <code>https://lnk.az/api</code>
            </div>

            <div class="warning">
              <strong>Qeyd:</strong> Bu sənəd yalnız daxili istifadə üçündür. Bu URL-i ictimaiyyətlə paylaşmayın.
            </div>
          </div>
        </div>

        <div class="api-section" id="authentication">
          <h2>Autentifikasiya</h2>
          <div class="api-endpoint">
            <p>Hazırda API autentifikasiya tələb etmir. Bununla belə, sui-istifadənin qarşısını almaq üçün IP ünvanına əsaslanan sürət limitləri tətbiq olunur.</p>
          </div>
        </div>

        <div class="api-section" id="rate-limits">
          <h2>Sürət Limitləri</h2>
          <div class="api-endpoint">
            <p>Sürət limitləri hər bir IP ünvanına ayrıca tətbiq olunur:</p>
            <ul>
              <li><strong>Təhlil API-si:</strong> dəqiqədə 10 sorğu</li>
              <li><strong>Digər API-lər:</strong> xüsusi limit yoxdur (məqbul istifadə gözlənilir)</li>
            </ul>
            <p>Sürət limitini aşdıqda 429 status kodu və səhv mesajı alacaqsınız.</p>
          </div>
        </div>

        <div class="api-section" id="analysis-apis">
          <h2>Təhlil API-ləri</h2>
          
          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="endpoint-url">/api/analyze</span>
            </div>
            <div class="endpoint-description">
              Xəbər məqaləsini qərəz və etibarlılıq baxımından təhlil edin. Bu, əsas API endpointidir.
            </div>
            
            <div class="parameters">
              <h4>Sorğunun Gövdəsi</h4>
              <table class="param-table">
                <thead>
                  <tr>
                    <th>Parametr</th>
                    <th>Növ</th>
                    <th>Tələb olunur</th>
                    <th>Təsvir</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="param-name">url</span></td>
                    <td>string</td>
                    <td><span class="param-required">Yes</span></td>
                    <td>Təhlil ediləcək məqalənin URL-i</td>
                  </tr>
                  <tr>
                    <td><span class="param-name">modelType</span></td>
                    <td>string</td>
                    <td><span class="param-optional">No</span></td>
                    <td>İstifadə olunacaq AI modeli: "auto", "flash-lite", "flash", "pro"</td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="example">
              <h4>Nümunə Sorğu</h4>
              <div class="code-block">curl -X POST https://lnk.az/api/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/news-article",
    "modelType": "auto"
  }'</div>
            </div>
            
            <div class="response-example">
              <h4>Nümunə Cavab</h4>
              <div class="code-block">{
  "hash": "abc123def456",
  "meta": {
    "article_type": "xəbər",
    "title": "Article Title",
    "original_url": "https://example.com/news-article",
    "publication": "example.com",
    "published_at": "2025-01-16T10:30:00Z"
  },
  "scores": {
    "reliability": {
      "value": 85,
      "rationale": "Məqalə faktlara söykənir və mənbələr göstərilir..."
    },
    "political_establishment_bias": {
      "value": 1.2,
      "rationale": "Məqalədə hakimiyyətə müsbət meyl var..."
    }
  },
  "diagnostics": {
    "socio_cultural_descriptions": [...],
    "language_flags": [...]
  },
  "cited_sources": [...],
  "human_summary": "Məqalənin əsas məzmunu...",
  "is_advertisement": false,
  "analyzed_at": "2025-01-16T10:35:00Z"
}</div>
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/get-analysis?id={hash}</span>
            </div>
            <div class="endpoint-description">
              Əvvəl təhlil edilmiş məqaləni onun hash/ID-si ilə geri qaytarır.
            </div>
            
            <div class="parameters">
              <h4>Sorğu Parametrləri</h4>
              <table class="param-table">
                <thead>
                  <tr>
                    <th>Parametr</th>
                    <th>Növ</th>
                    <th>Tələb olunur</th>
                    <th>Təsvir</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="param-name">id</span></td>
                    <td>string</td>
                    <td><span class="param-required">Yes</span></td>
                    <td>Təhlilin hash/ID dəyəri</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="api-section" id="data-apis">
          <h2>Məlumat və Statistika API-ləri</h2>
          
          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/statistics</span>
            </div>
            <div class="endpoint-description">
              Platformanın istifadəsi üzrə statistikanı, o cümlədən ümumi təhlilləri və son aktivliyi əldə edin.
            </div>
            
            <div class="response-example">
              <h4>Nümunə Cavab</h4>
              <div class="code-block">{
  "total_analyses": 1250,
  "recent_analyses": 15,
  "timestamp": "2025-01-16T10:35:00Z"
}</div>
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/site-averages?host={hostname}</span>
            </div>
            <div class="endpoint-description">
              Müəyyən bir xəbər saytının etibarlılıq və qərəz statistikalarını əldə edin.
            </div>
            
            <div class="parameters">
              <h4>Sorğu Parametrləri</h4>
              <table class="param-table">
                <thead>
                  <tr>
                    <th>Parametr</th>
                    <th>Növ</th>
                    <th>Tələb olunur</th>
                    <th>Təsvir</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="param-name">host</span></td>
                    <td>string</td>
                    <td><span class="param-required">Yes</span></td>
                      <td>Host adı (məs., "oxu.az")</td>
                  </tr>
                  <tr>
                    <td><span class="param-name">url</span></td>
                    <td>string</td>
                    <td><span class="param-optional">No</span></td>
                      <td>Tam URL (host avtomatik çıxarılacaq)</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/recent-analyses</span>
            </div>
            <div class="endpoint-description">
              Reklam olmayan ən son 5 təhlili əldə edin.
            </div>
          </div>
        </div>

        <div class="api-section" id="utility-apis">
          <h2>Köməkçi API-lər</h2>
          
          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/analysis-html?hash={hash}</span>
            </div>
            <div class="endpoint-description">
              Təhlil üçün HTML səhifəsi yaradın (paylaşım və SEO üçün istifadə olunur).
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/sitemap</span>
            </div>
            <div class="endpoint-description">
              SEO məqsədləri üçün XML sayt xəritəsini əldə edin.
            </div>
          </div>
        </div>

        <div class="api-section" id="response-formats">
          <h2>Cavab Formatları</h2>
          <div class="api-endpoint">
            <h3>Təhlil Cavabı Sxemi</h3>
            <div class="code-block">{
  "hash": "string",           // Unikal təhlil ID-si
  "meta": {
    "article_type": "string", // "xəbər", "rəy", "analitika" və s.
    "title": "string",        // Məqalənin Azərbaycan dilində başlığı
    "original_url": "string", // Məqalənin orijinal URL-i
    "publication": "string",  // Nəşrin adı
    "published_at": "string"  // ISO 8601 zaman möhürü
  },
  "scores": {
    "reliability": {
      "value": "number",      // 0-100
      "rationale": "string"   // Azərbaycan dilində izah
    },
    "political_establishment_bias": {
      "value": "number",      // -5-dən +5-ə qədər
      "rationale": "string"   // Azərbaycan dilində izah
    }
  },
  "diagnostics": {
    "socio_cultural_descriptions": [
      {
        "group": "string",
        "stance": "string",   // "müsbət", "mənfi", "neytral", "qarışıq"
        "rationale": "string"
      }
    ],
    "language_flags": [
      {
        "term": "string",
        "category": "string", // "yüklü söz", "qeyri-müəyyən", "spekulyativ"
        "evidence": "string"
      }
    ]
  },
  "cited_sources": [
    {
      "name": "string",
      "role": "string",       // "rəsmi qurum", "media", "ekspert" və s.
      "stance": "string"      // "müsbət", "mənfi", "neytral", "qarışıq"
    }
  ],
  "human_summary": "string",  // Azərbaycan dilində 2-4 cümləlik xülasə
  "is_advertisement": "boolean",
  "advertisement_reason": "string",
  "analyzed_at": "string",    // ISO 8601 zaman möhürü
  "modelUsed": "string",      // İstifadə olunan AI modeli
  "contentSource": "string"   // "Live", "Archive.org", "Archive.md" və s.
}</div>
          </div>
        </div>

        <div class="api-section" id="error-handling">
          <h2>Səhv İdarəetməsi</h2>
          <div class="api-endpoint">
            <p>Bütün API-lər uyğun HTTP status kodlarını və JSON formatında səhv mesajlarını qaytarır:</p>

            <table class="param-table">
              <thead>
                <tr>
                  <th>Status Kodu</th>
                  <th>Təsvir</th>
                  <th>Nümunə Cavab</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>200</td>
                  <td>Uğur</td>
                  <td>Təhlil məlumatı və ya tələb olunan informasiya</td>
                </tr>
                <tr>
                  <td>400</td>
                  <td>Səhv Sorğu</td>
                  <td><code>{"error": "URL daxil edilməyib."}</code></td>
                </tr>
                <tr>
                  <td>404</td>
                  <td>Tapılmadı</td>
                  <td><code>{"error": true, "message": "Not found"}</code></td>
                </tr>
                <tr>
                  <td>429</td>
                  <td>Limit Aşılıb</td>
                  <td><code>{"error": "Çox sayda sorğu göndərilir."}</code></td>
                </tr>
                <tr>
                  <td>500</td>
                  <td>Daxili Səhv</td>
                  <td><code>{"error": true, "message": "Internal error"}</code></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="api-section" id="examples">
          <h2>Kod Nümunələri</h2>
          
          <div class="api-endpoint">
            <h3>JavaScript/Node.js</h3>
            <div class="code-block">// Məqaləni təhlil et
const response = await fetch('https://lnk.az/api/analyze', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    url: 'https://example.com/news-article',
    modelType: 'auto'
  })
});

const analysis = await response.json();
console.log('Etibarlılıq:', analysis.scores.reliability.value);
console.log('Qərəz:', analysis.scores.political_establishment_bias.value);

// Sayt statistikalarını əldə et
const siteStats = await fetch('https://lnk.az/api/site-averages?host=oxu.az');
const stats = await siteStats.json();
console.log('Orta etibarlılıq:', stats.avg_rel);</div>
          </div>

          <div class="api-endpoint">
            <h3>Python</h3>
            <div class="code-block">import requests
import json

# Məqaləni təhlil et
response = requests.post('https://lnk.az/api/analyze',
  json={
    'url': 'https://example.com/news-article',
    'modelType': 'auto'
  }
)

analysis = response.json()
print(f"Etibarlılıq: {analysis['scores']['reliability']['value']}")
print(f"Qərəz: {analysis['scores']['political_establishment_bias']['value']}")

# Son təhlilləri əldə et
recent = requests.get('https://lnk.az/api/recent-analyses')
analyses = recent.json()
for analysis in analyses:
    print(f"Başlıq: {analysis['title']}")
    print(f"Nəşr: {analysis['publication']}")</div>
          </div>

          <div class="api-endpoint">
            <h3>cURL</h3>
            <div class="code-block"># Məqaləni təhlil et
curl -X POST https://lnk.az/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com/news-article", "modelType": "auto"}'

# Təhlili hash vasitəsilə əldə et
curl "https://lnk.az/api/get-analysis?id=abc123def456"

# Statistikaları əldə et
curl "https://lnk.az/api/statistics"

# Sayt üzrə ortalamaları əldə et
curl "https://lnk.az/api/site-averages?host=oxu.az"</div>
          </div>
        </div>

        <div class="api-section">
          <h2>Dəstək</h2>
          <div class="api-endpoint">
            <p>API ilə bağlı sual və ya problemlər üçün xahiş edirik daxili şəkildə inkişaf komandası ilə əlaqə saxlayın.</p>
            <p><strong>Son Yenilənmə:</strong> 16 yanvar 2025</p>
          </div>
        </div>
      </div>
    </main>
    <div id="site-footer"></div>
  </div>

  <script src="/static/layout.js" defer></script>
</body>
</html>