<!DOCTYPE html>
<html lang="az" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />

  <title>LNK.az API Documentation</title>
  <meta name="description" content="LNK.az API Documentation - Media bias and reliability analysis API" />
  <meta name="theme-color" content="#0c0d12">
  <meta name="color-scheme" content="light dark" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
  <link rel="alternate icon" href="/static/favicon.ico">
  <link rel="icon" href="/static/favicon-light.svg" media="(prefers-color-scheme: light)">
  <link rel="icon" href="/static/favicon-dark.svg"  media="(prefers-color-scheme: dark)">
  <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">

  <link rel="stylesheet" href="/static/styles.css">
  
  <style>
    .documentation {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
      font-family: 'Poppins', sans-serif;
      line-height: 1.6;
    }
    
    .doc-header {
      text-align: center;
      margin-bottom: 3rem;
      padding: 2rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 12px;
    }
    
    .doc-header h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      font-weight: 700;
    }
    
    .doc-header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    .api-section {
      margin-bottom: 3rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .api-section h2 {
      background: #f8f9fa;
      padding: 1.5rem;
      margin: 0;
      border-bottom: 1px solid #e9ecef;
      color: #2c3e50;
      font-size: 1.5rem;
    }
    
    .api-endpoint {
      padding: 1.5rem;
      border-bottom: 1px solid #e9ecef;
    }
    
    .api-endpoint:last-child {
      border-bottom: none;
    }
    
    .endpoint-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .method {
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-weight: 600;
      font-size: 0.875rem;
      margin-right: 1rem;
    }
    
    .method.get { background: #d4edda; color: #155724; }
    .method.post { background: #cce5ff; color: #004085; }
    
    .endpoint-url {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      background: #f8f9fa;
      padding: 0.5rem;
      border-radius: 4px;
      font-size: 1rem;
    }
    
    .endpoint-description {
      margin-bottom: 1rem;
      color: #6c757d;
    }
    
    .parameters {
      margin-bottom: 1rem;
    }
    
    .parameters h4 {
      margin-bottom: 0.5rem;
      color: #495057;
    }
    
    .param-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    
    .param-table th,
    .param-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid #e9ecef;
    }
    
    .param-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #495057;
    }
    
    .param-name {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      background: #e9ecef;
      padding: 0.25rem 0.5rem;
      border-radius: 3px;
      font-size: 0.8rem;
    }
    
    .param-required {
      color: #dc3545;
      font-weight: 600;
    }
    
    .param-optional {
      color: #6c757d;
    }
    
    .example {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1rem;
    }
    
    .example h4 {
      margin-bottom: 0.5rem;
      color: #495057;
    }
    
    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 1rem;
      border-radius: 4px;
      overflow-x: auto;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9rem;
      line-height: 1.4;
    }
    
    .response-example {
      background: #f0f8ff;
      border-left: 4px solid #007bff;
      padding: 1rem;
      margin-top: 1rem;
    }
    
    .response-example h4 {
      margin-bottom: 0.5rem;
      color: #004085;
    }
    
    .toc {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .toc h3 {
      margin-bottom: 1rem;
      color: #2c3e50;
    }
    
    .toc ul {
      list-style: none;
      padding: 0;
    }
    
    .toc li {
      margin-bottom: 0.5rem;
    }
    
    .toc a {
      color: #007bff;
      text-decoration: none;
      font-weight: 500;
    }
    
    .toc a:hover {
      text-decoration: underline;
    }
    
    .warning {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 4px;
      padding: 1rem;
      margin: 1rem 0;
      color: #856404;
    }
    
    .info {
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      border-radius: 4px;
      padding: 1rem;
      margin: 1rem 0;
      color: #0c5460;
    }
    
    @media (prefers-color-scheme: dark) {
      .api-section {
        background: #2d3748;
        color: #e2e8f0;
      }
      
      .api-section h2 {
        background: #4a5568;
        color: #e2e8f0;
      }
      
      .endpoint-url {
        background: #4a5568;
        color: #e2e8f0;
      }
      
      .param-table th {
        background: #4a5568;
        color: #e2e8f0;
      }
      
      .param-name {
        background: #4a5568;
        color: #e2e8f0;
      }
      
      .example {
        background: #4a5568;
        border-color: #718096;
      }
      
      .toc {
        background: #4a5568;
        color: #e2e8f0;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div id="site-header"></div>
    <main id="main" role="main">
      <div class="documentation">
        <div class="doc-header">
          <h1>LNK.az API Documentation</h1>
          <p>Media bias and reliability analysis API for developers</p>
        </div>

        <div class="toc">
          <h3>Table of Contents</h3>
          <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#authentication">Authentication</a></li>
            <li><a href="#rate-limits">Rate Limits</a></li>
            <li><a href="#analysis-apis">Analysis APIs</a></li>
            <li><a href="#data-apis">Data & Statistics APIs</a></li>
            <li><a href="#utility-apis">Utility APIs</a></li>
            <li><a href="#response-formats">Response Formats</a></li>
            <li><a href="#error-handling">Error Handling</a></li>
            <li><a href="#examples">Code Examples</a></li>
          </ul>
        </div>

        <div class="api-section" id="overview">
          <h2>Overview</h2>
          <div class="api-endpoint">
            <p>LNK.az provides a comprehensive API for analyzing media bias and reliability. The API uses advanced AI models to evaluate news articles and provide detailed analysis including reliability scores, political bias assessment, and source citations.</p>
            
            <div class="info">
              <strong>Base URL:</strong> <code>https://lnk.az/api</code>
            </div>
            
            <div class="warning">
              <strong>Note:</strong> This documentation is for internal use only. Do not share this URL publicly.
            </div>
          </div>
        </div>

        <div class="api-section" id="authentication">
          <h2>Authentication</h2>
          <div class="api-endpoint">
            <p>Currently, the API does not require authentication. However, rate limiting is applied based on IP address to prevent abuse.</p>
          </div>
        </div>

        <div class="api-section" id="rate-limits">
          <h2>Rate Limits</h2>
          <div class="api-endpoint">
            <p>Rate limits are applied per IP address:</p>
            <ul>
              <li><strong>Analysis API:</strong> 10 requests per minute</li>
              <li><strong>Other APIs:</strong> No specific limits (reasonable use expected)</li>
            </ul>
            <p>When rate limits are exceeded, you'll receive a 429 status code with an error message.</p>
          </div>
        </div>

        <div class="api-section" id="analysis-apis">
          <h2>Analysis APIs</h2>
          
          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="endpoint-url">/api/analyze</span>
            </div>
            <div class="endpoint-description">
              Analyze a news article for bias and reliability. This is the main API endpoint.
            </div>
            
            <div class="parameters">
              <h4>Request Body</h4>
              <table class="param-table">
                <thead>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="param-name">url</span></td>
                    <td>string</td>
                    <td><span class="param-required">Yes</span></td>
                    <td>URL of the article to analyze</td>
                  </tr>
                  <tr>
                    <td><span class="param-name">modelType</span></td>
                    <td>string</td>
                    <td><span class="param-optional">No</span></td>
                    <td>AI model to use: "auto", "flash-lite", "flash", "pro"</td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="example">
              <h4>Example Request</h4>
              <div class="code-block">curl -X POST https://lnk.az/api/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/news-article",
    "modelType": "auto"
  }'</div>
            </div>
            
            <div class="response-example">
              <h4>Example Response</h4>
              <div class="code-block">{
  "hash": "abc123def456",
  "meta": {
    "article_type": "xəbər",
    "title": "Article Title",
    "original_url": "https://example.com/news-article",
    "publication": "example.com",
    "published_at": "2025-01-16T10:30:00Z"
  },
  "scores": {
    "reliability": {
      "value": 85,
      "rationale": "Məqalə faktlara söykənir və mənbələr göstərilir..."
    },
    "political_establishment_bias": {
      "value": 1.2,
      "rationale": "Məqalədə hakimiyyətə müsbət meyl var..."
    }
  },
  "diagnostics": {
    "socio_cultural_descriptions": [...],
    "language_flags": [...]
  },
  "cited_sources": [...],
  "human_summary": "Məqalənin əsas məzmunu...",
  "is_advertisement": false,
  "analyzed_at": "2025-01-16T10:35:00Z"
}</div>
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/get-analysis?id={hash}</span>
            </div>
            <div class="endpoint-description">
              Retrieve a previously analyzed article by its hash/ID.
            </div>
            
            <div class="parameters">
              <h4>Query Parameters</h4>
              <table class="param-table">
                <thead>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="param-name">id</span></td>
                    <td>string</td>
                    <td><span class="param-required">Yes</span></td>
                    <td>Analysis hash/ID</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="api-section" id="data-apis">
          <h2>Data & Statistics APIs</h2>
          
          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/statistics</span>
            </div>
            <div class="endpoint-description">
              Get platform usage statistics including total analyses and recent activity.
            </div>
            
            <div class="response-example">
              <h4>Example Response</h4>
              <div class="code-block">{
  "total_analyses": 1250,
  "recent_analyses": 15,
  "timestamp": "2025-01-16T10:35:00Z"
}</div>
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/site-averages?host={hostname}</span>
            </div>
            <div class="endpoint-description">
              Get reliability and bias statistics for a specific news site.
            </div>
            
            <div class="parameters">
              <h4>Query Parameters</h4>
              <table class="param-table">
                <thead>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="param-name">host</span></td>
                    <td>string</td>
                    <td><span class="param-required">Yes</span></td>
                    <td>Hostname (e.g., "oxu.az")</td>
                  </tr>
                  <tr>
                    <td><span class="param-name">url</span></td>
                    <td>string</td>
                    <td><span class="param-optional">No</span></td>
                    <td>Full URL (host will be extracted)</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/recent-analyses</span>
            </div>
            <div class="endpoint-description">
              Get the 5 most recent non-advertisement analyses.
            </div>
          </div>
        </div>

        <div class="api-section" id="utility-apis">
          <h2>Utility APIs</h2>
          
          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/analysis-html?hash={hash}</span>
            </div>
            <div class="endpoint-description">
              Generate HTML page for an analysis (used for sharing and SEO).
            </div>
          </div>

          <div class="api-endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="endpoint-url">/api/sitemap</span>
            </div>
            <div class="endpoint-description">
              Get XML sitemap for SEO purposes.
            </div>
          </div>
        </div>

        <div class="api-section" id="response-formats">
          <h2>Response Formats</h2>
          <div class="api-endpoint">
            <h3>Analysis Response Schema</h3>
            <div class="code-block">{
  "hash": "string",           // Unique analysis ID
  "meta": {
    "article_type": "string", // "xəbər", "rəy", "analitika", etc.
    "title": "string",        // Article title in Azerbaijani
    "original_url": "string", // Original article URL
    "publication": "string",  // Publication name
    "published_at": "string"  // ISO 8601 timestamp
  },
  "scores": {
    "reliability": {
      "value": "number",      // 0-100
      "rationale": "string"   // Explanation in Azerbaijani
    },
    "political_establishment_bias": {
      "value": "number",      // -5 to +5
      "rationale": "string"   // Explanation in Azerbaijani
    }
  },
  "diagnostics": {
    "socio_cultural_descriptions": [
      {
        "group": "string",
        "stance": "string",   // "müsbət", "mənfi", "neytral", "qarışıq"
        "rationale": "string"
      }
    ],
    "language_flags": [
      {
        "term": "string",
        "category": "string", // "yüklü söz", "qeyri-müəyyən", "spekulyativ"
        "evidence": "string"
      }
    ]
  },
  "cited_sources": [
    {
      "name": "string",
      "role": "string",       // "rəsmi qurum", "media", "ekspert", etc.
      "stance": "string"      // "müsbət", "mənfi", "neytral", "qarışıq"
    }
  ],
  "human_summary": "string",  // 2-4 sentence summary in Azerbaijani
  "is_advertisement": "boolean",
  "advertisement_reason": "string",
  "analyzed_at": "string",    // ISO 8601 timestamp
  "modelUsed": "string",      // AI model used
  "contentSource": "string"   // "Live", "Archive.org", "Archive.md", etc.
}</div>
          </div>
        </div>

        <div class="api-section" id="error-handling">
          <h2>Error Handling</h2>
          <div class="api-endpoint">
            <p>All APIs return appropriate HTTP status codes and error messages in JSON format:</p>
            
            <table class="param-table">
              <thead>
                <tr>
                  <th>Status Code</th>
                  <th>Description</th>
                  <th>Example Response</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>200</td>
                  <td>Success</td>
                  <td>Analysis data or requested information</td>
                </tr>
                <tr>
                  <td>400</td>
                  <td>Bad Request</td>
                  <td><code>{"error": "URL daxil edilməyib."}</code></td>
                </tr>
                <tr>
                  <td>404</td>
                  <td>Not Found</td>
                  <td><code>{"error": true, "message": "Not found"}</code></td>
                </tr>
                <tr>
                  <td>429</td>
                  <td>Rate Limited</td>
                  <td><code>{"error": "Çox sayda sorğu göndərilir."}</code></td>
                </tr>
                <tr>
                  <td>500</td>
                  <td>Internal Error</td>
                  <td><code>{"error": true, "message": "Internal error"}</code></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="api-section" id="examples">
          <h2>Code Examples</h2>
          
          <div class="api-endpoint">
            <h3>JavaScript/Node.js</h3>
            <div class="code-block">// Analyze an article
const response = await fetch('https://lnk.az/api/analyze', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    url: 'https://example.com/news-article',
    modelType: 'auto'
  })
});

const analysis = await response.json();
console.log('Reliability:', analysis.scores.reliability.value);
console.log('Bias:', analysis.scores.political_establishment_bias.value);

// Get site statistics
const siteStats = await fetch('https://lnk.az/api/site-averages?host=oxu.az');
const stats = await siteStats.json();
console.log('Average reliability:', stats.avg_rel);</div>
          </div>

          <div class="api-endpoint">
            <h3>Python</h3>
            <div class="code-block">import requests
import json

# Analyze an article
response = requests.post('https://lnk.az/api/analyze', 
  json={
    'url': 'https://example.com/news-article',
    'modelType': 'auto'
  }
)

analysis = response.json()
print(f"Reliability: {analysis['scores']['reliability']['value']}")
print(f"Bias: {analysis['scores']['political_establishment_bias']['value']}")

# Get recent analyses
recent = requests.get('https://lnk.az/api/recent-analyses')
analyses = recent.json()
for analysis in analyses:
    print(f"Title: {analysis['title']}")
    print(f"Publication: {analysis['publication']}")</div>
          </div>

          <div class="api-endpoint">
            <h3>cURL</h3>
            <div class="code-block"># Analyze an article
curl -X POST https://lnk.az/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com/news-article", "modelType": "auto"}'

# Get analysis by hash
curl "https://lnk.az/api/get-analysis?id=abc123def456"

# Get statistics
curl "https://lnk.az/api/statistics"

# Get site averages
curl "https://lnk.az/api/site-averages?host=oxu.az"</div>
          </div>
        </div>

        <div class="api-section">
          <h2>Support</h2>
          <div class="api-endpoint">
            <p>For questions or issues with the API, please contact the development team internally.</p>
            <p><strong>Last Updated:</strong> January 16, 2025</p>
          </div>
        </div>
      </div>
    </main>
    <div id="site-footer"></div>
  </div>

  <script src="/static/layout.js" defer></script>
</body>
</html>
