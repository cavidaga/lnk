<!DOCTYPE html>
<html lang="az" class="no-js">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>LNK - Media qərəzi qiymətləndiricisi</title>
  <meta name="description" content="LNK.az - Azərbaycanın ilk süni intellektə əsaslanan media qərəzi analizatoru. İstənilən xəbər linkini daxil edin və məqalənin etibarlılığını, siyasi meylini və tərəfsizliyini anında qiymətləndirin." />
  <meta name="theme-color" content="#0c0d12">
  <meta name="color-scheme" content="light dark" />

  <!-- Google Fonts: Poppins -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Canonical & Open Graph -->
  <link rel="canonical" href="https://lnk.az/" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="LNK - Media qərəzi qiymətləndiricisi" />
  <meta property="og:description" content="Süni intellekt ilə media qərəzini yoxlayın. Xəbərləri və məqalələri bir kliklə analiz edin. Obyektiv məlumat üçün LNK.az." />
  <meta property="og:url" content="https://lnk.az/" />
  <meta property="og:image" content="https://lnk.az/public/static/og-cover.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="LNK - Media qərəzi qiymətləndiricisi" />
  <meta name="twitter:description" content="Süni intellekt ilə media qərəzini yoxlayın. Xəbərləri və məqalələri bir kliklə analiz edin. Obyektiv məlumat üçün LNK.az." />
  <meta name="twitter:image" content="https://lnk.az/public/static/og-cover.png" />

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"LNK - Media qərəzi qiymətləndiricisi",
    "url":"https://lnk.az/",
    "applicationCategory":"NewsApplication",
    "operatingSystem":"Any",
    "creator":{"@type":"Person","name":"Javid Agha","url":"https://cavid.info"}
  }
  </script>

<style>
  :root{
    /* === LNK.az brand tokens === */
    --navy: #001F3F;            /* quadrant navy */
    --red: #FF0000;             /* bias dots */
    --red-dark: #B50000;

    /* Dark theme (default) */
    --bg:#0c0d12;
    --panel:#11131a;
    --card:#10131a;
    --text:#e9edf3;
    --muted:#8e97ab;
    --border:#1c2230;
    --accent: var(--red);
    --accent-2: var(--red-dark);
    --danger:#ff5a52;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --ring: 0 0 0 3px rgba(255, 0, 0, .35);
    --grid: rgba(255,255,255,.08); /* bias chart grid on dark */
  }

  @media (prefers-color-scheme: light){
    :root{
      /* Light theme */
      --bg:#ffffff;
      --panel:#f8fafd;
      --card:#ffffff;
      --text: var(--navy);
      --muted:#5b6678;
      --border:#e7ebf3;
      --accent: var(--red);
      --accent-2: var(--red-dark);
      --danger:#b42318;
      --shadow: 0 10px 24px rgba(10,31,68,.08);
      --ring: 0 0 0 3px rgba(255, 0, 0, .25);
      --grid: rgba(0,31,63,.10); /* navy-tinted grid on light */
    }
  }

  *{ box-sizing:border-box }
  html:focus-within{ scroll-behavior:smooth }

  body{
    margin:0;
    font:16px/1.6 "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans";
    color:var(--text);
    /* Softer NAVY-tinted background glow to match logo */
    background:
      radial-gradient(1100px 760px at 8% -18%, color-mix(in oklab, var(--navy) 14%, transparent), transparent 60%),
      radial-gradient(900px 640px at 112% 6%, color-mix(in oklab, var(--navy) 10%, transparent), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0) 30%),
      var(--bg);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  .wrap{ max-width:920px; margin:0 auto; padding:28px 20px 96px }

  .skip-link{
    position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden
  }
  .skip-link:focus{
    left:16px; top:16px; width:auto; height:auto; padding:8px 12px;
    background:var(--panel); border:1px solid var(--border); border-radius:8px; z-index:1000
  }

  header{ display:flex; align-items:center; gap:14px; margin-bottom:22px }
  .logo-img{
    /* Slightly responsive but capped, keeps crisp look */
    width: clamp(40px, 4vw, 56px);
    height: clamp(40px, 4vw, 56px);
    border-radius:10px;
    box-shadow:var(--shadow);
    display:block;
    background:#fff; /* ensures red nodes pop on dark bg */
  }
  h1{ font-size:26px; margin:0; letter-spacing:.2px }
  .sub{ color:var(--muted); margin-top:-4px }

  .card{ background:var(--card); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow) }
  .card > .bd{ padding:20px }

  .row{ display:grid; gap:12px; grid-template-columns:1fr 160px }
  @media (max-width:520px){ .row{ grid-template-columns:1fr } }

  .label{ position:absolute; left:-9999px }

  .input, .btn{
    width:100%; padding:12px 14px; border-radius:10px; border:1px solid var(--border);
    background:var(--panel); color:var(--text); font-size:16px; outline:none; transition:all .2s ease;
  }
  .input:focus{ border-color:var(--accent); box-shadow:var(--ring) }

  /* Primary button: red gradient, accessible hover/active states */
  .btn{
    background: linear-gradient(135deg,
                 color-mix(in oklab, var(--accent) 90%, white 10%),
                 color-mix(in oklab, var(--accent-2) 78%, black 22%));
    color:#fff; border:0; font-weight:650; cursor:pointer;
  }
  .btn:hover{
    transform: translateY(-1px);
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
  }
  .btn:active{ transform: translateY(0) }
  .btn:disabled{ background:var(--border); cursor:not-allowed; transform:none; color:var(--muted) }

  .result{ display:none; margin-top:20px }
  .result.show{ display:block }

  .loading{
    display:flex; align-items:center; justify-content:center; gap:10px;
    color:var(--muted); padding:40px 0
  }
  .spinner{
    width:18px; height:18px; border:2px solid rgba(255,255,255,.25);
    border-top-color:var(--accent); border-radius:50%; animation:spin 1s linear infinite
  }
  @keyframes spin{ to{ transform:rotate(360deg) } }

  .error{
    padding:20px; text-align:center; border-radius:10px; border:1px solid var(--danger);
    background:rgba(239,100,97,.12); color:var(--danger); font-weight:500
  }

  .analysis-grid{ display:grid; grid-template-columns:1fr; gap:20px; margin-top:20px }
  @media (min-width:768px){ .analysis-grid{ grid-template-columns:300px 1fr } }

  .bias-chart{
    width:100%; height:280px; background-color:var(--panel);
    border:1px solid var(--border); border-radius:12px; position:relative;
    background-image:
      linear-gradient(var(--grid) 1px, transparent 1px),
      linear-gradient(90deg, var(--grid) 1px, transparent 1px);
    background-size:100% 50%, 50% 100%;
  }
  .chart-point{
    position:absolute; width:18px; height:18px;
    background: radial-gradient(circle, #fff 25%, var(--accent) 80%);
    border-radius:50%; transform:translate(-50%,-50%); border:2px solid #fff;
    box-shadow: 0 0 0 2px rgba(255,255,255,.3),
                0 0 18px color-mix(in oklab, var(--accent) 60%, transparent);
    transition: top .5s ease-out, left .5s ease-out;
  }
  .axis-label{
    position:absolute; color:var(--muted); font-size:10px; text-transform:uppercase; letter-spacing:.08em
  }
  .y-axis-top{ top:6px; left:50%; transform:translateX(-50%) }
  .y-axis-bottom{ bottom:6px; left:50%; transform:translateX(-50%) }
  .x-axis-left{ left:6px; top:50%; transform:translateY(-50%) rotate(180deg); writing-mode:vertical-rl }
  .x-axis-right{ right:6px; top:50%; transform:translateY(-50%); writing-mode:vertical-rl }

  .summary-card h4{ margin:6px 0 8px 0 }
  .summary-card p{ margin:0; color:var(--muted); font-size:15.5px }

  .score-details dt{ font-weight:600; color:var(--text); margin-top:1.2em }
  .score-details dd{
    margin:.2em 0 0 1em; color:var(--muted); font-size:14px;
    border-left:2px solid var(--border); padding-left:1em
  }
  .score-details .value{
    font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    color:var(--accent); font-weight:700
  }

  .sec-title{ margin:22px 0 8px; font-weight:700; font-size:18px; border-bottom:1px solid var(--border); padding-bottom:6px; letter-spacing:.2px }
  .article-type-tag{ display:inline-block; background-color:var(--accent); color:white; padding:4px 12px; border-radius:999px; font-size:14px; font-weight:700; margin-bottom:10px }

  .sources-table{ width:100%; border-collapse:collapse; font-size:14px; margin-top:10px }
  .sources-table th, .sources-table td{ text-align:left; padding:12px 10px; border-bottom:1px solid var(--border) }
  .sources-table th{ color:var(--muted) }

  .diagnostics-grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:15px }
  .diag-item{ background-color:var(--panel); padding:15px; border-radius:10px; border:1px solid var(--border) }
  .diag-item .label{ font-size:14px; color:var(--muted) }
  .diag-item .value{ font-size:24px; font-weight:700; color:var(--text) }

  .language-flags{ font-size:14px; color:var(--muted) }
  details{ margin-top:20px }
  summary{ cursor:pointer; color:var(--muted); font-size:14px }
  pre{
    background-color:var(--panel); border:1px solid var(--border); border-radius:8px;
    padding:15px; font-size:12px; white-space:pre-wrap; word-wrap:break-word; max-height:400px; overflow:auto
  }

  .share-section{
    margin-top:20px; padding:15px; background-color:var(--panel);
    border:1px solid var(--border); border-radius:10px; text-align:center
  }
  .share-section h4{
    margin:0 0 10px 0; color:var(--muted); font-size:13px; text-transform:uppercase; letter-spacing:.1em
  }
  .share-section input{
    width:100%; background-color:var(--bg); border:1px solid var(--border);
    color:var(--text); text-align:center; padding:10px; border-radius:8px
  }

  /* Footer */
  footer.site-footer{
    margin-top:36px; padding:22px; border-top:1px solid var(--border);
    display:flex; flex-direction:column; gap:14px; align-items:center; justify-content:center; color:var(--muted)
  }
  .footer-row{ display:flex; gap:14px; flex-wrap:wrap; align-items:center; justify-content:center }
  .footer-brand{ display:flex; gap:8px; align-items:center }
  .footer-brand a{ color:var(--text); text-decoration:none; font-weight:650 }
  .footer-icons a{
    display:inline-flex; align-items:center; justify-content:center; gap:8px;
    padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:var(--panel);
    text-decoration:none; color:var(--text); font-size:14px; transition:transform .15s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
  }
  .footer-icons a:hover{
    transform:translateY(-1px);
    border-color:var(--accent);
    background: color-mix(in oklab, var(--panel) 92%, var(--accent) 8%);
  }

  .icon{ width:18px; height:18px; display:inline-block }
  .muted{ color:var(--muted) }
  .small{ font-size:12px }

  @media (prefers-reduced-motion: reduce){
    *{ animation:none !important; transition:none !important }
  }
</style>
</head>
<body>
  <a class="skip-link" href="#main">Mündəricata keç</a>

  <div class="wrap">
    <header>
      <img src="/static/logo.svg" alt="LNK loqo" class="logo-img" width="42" height="42" />
      <div>
        <h1>LNK - Media qərəzi qiymətləndiricisi</h1>
        <div class="sub">Azərbaycanın ilk süni zəkaya əsaslanan media qərəzi analizatoru. İstənilən xəbər linkini daxil edin və məqalənin etibarlılığını, siyasi meylini və tərəfsizliyini anında qiymətləndirin.</div>
      </div>
    </header>

    <main id="main" aria-labelledby="app-title">
      <div id="app-container">
        <div class="card" role="region" aria-label="Məqalə təhlili formu">
          <div class="bd">
            <div class="row">
              <label class="label" for="urlInput">Məqalə linki</label>
              <input class="input" id="urlInput" type="url" inputmode="url" placeholder="Məqalə linkini yapışdırın..." autocomplete="url" aria-describedby="helper" />
              <button class="btn" id="btn-analyse" type="button" aria-label="Məqaləni təhlil et">Təhlil et</button>
            </div>
            <div id="helper" class="small muted" style="margin-top:8px">Nümunə: https://abzas.org/az/2025/9/mhkmlrin-boksunda-donn1b5e8f6e-3/</div>
          </div>
        </div>
      </div>

      <div id="result" class="result" aria-live="polite"></div>
    </main>

    <footer class="site-footer">
      <div class="footer-row footer-brand">
        <span class="small">LNK.AZ bir</span>
        <a class="small" href="https://cavid.info" target="_blank" rel="noopener">Cavid Ağa</a>
        <span class="small">layihəsidir</span>
      </div>

      <div class="footer-row footer-icons" aria-label="Sosial bağlantılar">
        <a href="https://cavid.info" target="_blank" rel="noopener">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3l9 4.5v9L12 21 3 16.5v-9L12 3z" stroke="currentColor" stroke-width="1.5"/></svg>
          Sayt
        </a>
        <a href="https://x.com/cavidaga" target="_blank" rel="noopener">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M18.244 2H21l-6.59 7.523L22 22h-6.828l-5.34-6.508L3.338 22H1l7.093-8.106L2 2h6.828l4.89 5.972L18.244 2Zm-2.393 18h1.89L7.247 3.98H5.27L15.85 20Z"/></svg>
          X (Twitter)
        </a>
        <a href="https://github.com/cavidaga" target="_blank" rel="noopener">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .5a11.5 11.5 0 0 0-3.637 22.428c.575.108.785-.25.785-.556 0-.274-.01-1-.016-1.963-3.194.694-3.87-1.54-3.87-1.54-.523-1.33-1.277-1.684-1.277-1.684-1.043-.713.08-.699.08-.699 1.152.081 1.759 1.184 1.759 1.184 1.025 1.757 2.69 1.25 3.345.956.104-.743.401-1.25.728-1.538-2.55-.29-5.232-1.275-5.232-5.67 0-1.253.45-2.278 1.187-3.082-.12-.29-.515-1.46.112-3.046 0 0 .967-.31 3.17 1.177a10.98 10.98 0 0 1 5.774 0c2.203-1.486 3.169-1.177 3.169-1.177.628 1.586.233 2.756.114 3.046.739.804 1.186 1.83 1.186 3.082 0 4.406-2.686 5.377-5.247 5.662.41.356.78 1.058.78 2.134 0 1.54-.014 2.78-.014 3.158 0 .309.207.671.792.555A11.5 11.5 0 0 0 12 .5Z"/></svg>
          GitHub
        </a>
        <a href="https://www.buymeacoffee.com/cavidaga" target="_blank" rel="noopener">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 7h14a3 3 0 0 1 0 6h-1.2l-.7 4.2A3 3 0 0 1 13.14 20H8.86A3 3 0 0 1 6.9 17.2L6.2 13H6a3 3 0 0 1 0-6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M6.2 13h9.6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Layihəyə dəstək ol
        </a>
        <a href="mailto:hello@cavid.info">
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16v12H4z" stroke="currentColor" stroke-width="1.5"/><path d="m4 7 8 6 8-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          Əlaqə
        </a>
      </div>

      <div class="small muted">© <span id="y"></span> LNK.AZ — Made by <a class="muted" href="https://cavid.info" target="_blank" rel="noopener">cavid.info</a></div>
    </footer>
  </div>

  <script>
    // Year in footer
    document.getElementById('y').textContent = new Date().getFullYear();

    const urlInput = document.getElementById('urlInput');
    const analyseBtn = document.getElementById('btn-analyse');
    const resultDiv = document.getElementById('result');
    const appContainer = document.getElementById('app-container');

    // --- ON PAGE LOAD ---
    document.addEventListener('DOMContentLoaded', () => {
      const path = window.location.pathname;
      const parts = path.split('/').filter(Boolean);
      if (parts[0] === 'analysis' && parts[1]) {
        const analysisId = parts[1];
        if (appContainer) appContainer.style.display = 'none';
        loadSharedAnalysis(analysisId);
      }
    });

    async function loadSharedAnalysis(id) {
      resultDiv.innerHTML = `<div class="loading"><span class="spinner"></span> <span>Saxlanmış analiz yüklənir…</span></div>`;
      resultDiv.classList.add('show');
      try {
        const response = await fetch(`/api/get-analysis?id=${id}`);
        const data = await response.json();
        if (!response.ok) throw new Error(data.error || 'Analiz tapılmadı.');
        displayResult(data, false);
      } catch (error) {
        resultDiv.innerHTML = `<div class="error">${error.message}</div>`;
      }
    }

    // --- MAIN DISPLAY FUNCTION ---
    function displayResult(data, isNewAnalysis = true) {
      const { meta = {}, scores = {}, diagnostics = {}, cited_sources = [], human_summary = "Xülasə təqdim edilmədi." } = data;

      const reliability = scores.reliability?.value ?? 50;
      const politicalBias = scores.political_establishment_bias?.value ?? 0;
      const topPos = 100 - reliability;
      const leftPos = (politicalBias + 5) / 10 * 100;

      const sourcesTableHTML = cited_sources.length > 0 ? `
        <table class="sources-table">
          <thead><tr><th>Ad</th><th>Rol</th><th>Mövqe</th></tr></thead>
          <tbody>
            ${cited_sources.map(s => `<tr><td>${escapeHTML(s.name)}</td><td>${escapeHTML(s.role)}</td><td>${escapeHTML(s.stance)}</td></tr>`).join('')}
          </tbody>
        </table>` : '<p class="muted small">Məqalədə birbaşa mənbə göstərilməyib.</p>`;

      const languageFlagsHTML = diagnostics.language_flags?.length > 0
        ? `<ul>${diagnostics.language_flags.map(f => `<li><strong>${escapeHTML(f.term)}:</strong> <span class="muted">${escapeHTML(f.category)}</span></li>`).join('')}</ul>`
        : '<p class="muted small">Mənfi dil siqnalları aşkar edilmədi.</p>';

      let resultHTML = `
        <div class="analysis-grid">
          <div>
            <div class="bias-chart" role="img" aria-label="Etibarlılıq və siyasi meyl qrafiki">
              <div class="chart-point" style="top:${topPos}%;left:${leftPos}%;"></div>
              <span class="axis-label y-axis-top">Etibarlı</span>
              <span class="axis-label y-axis-bottom">Etibarsız</span>
              <span class="axis-label x-axis-left">Müxalif</span>
              <span class="axis-label x-axis-right">Hökumətyönümlü</span>
            </div>
          </div>
          <div class="summary-card">
            ${meta.article_type ? `<div class="article-type-tag">${escapeHTML(meta.article_type)}</div>` : ''}
            <h4>Xülasə</h4>
            <p>${escapeHTML(human_summary).replace(/\n/g, '<br>')}</p>
          </div>
        </div>
        <div class="card" style="margin-top:20px;">
          <div class="bd">
            <h3 class="sec-title">Diaqnostik Göstəricilər</h3>
            <div class="diagnostics-grid">
              <div class="diag-item"><div class="label">Dilin yüklülüyü</div><div class="value">${diagnostics.language_loadedness ?? 'N/A'}</div></div>
              <div class="diag-item"><div class="label">Mənbə şəffaflığı</div><div class="value">${diagnostics.sourcing_transparency ?? 'N/A'}</div></div>
              <div class="diag-item"><div class="label">Başlığın dəqiqliyi</div><div class="value">${diagnostics.headline_accuracy ?? 'N/A'}</div></div>
            </div>
            <h4 style="margin-top:20px;">Konkret dil siqnalları</h4>
            <div class="language-flags">${languageFlagsHTML}</div>
            <h3 class="sec-title">Mənbələr</h3>
            ${sourcesTableHTML}
            <h3 class="sec-title">Əsas oxlar üzrə izah</h3>
            <dl class="score-details">
              <dt>Etibarlılıq: <span class="value">${scores.reliability?.value ?? 'N/A'}</span></dt>
              <dd>${escapeHTML(scores.reliability?.rationale || '')}</dd>
              <dt>Siyasi hakimiyyət meyli: <span class="value">${scores.political_establishment_bias?.value ?? 'N/A'}</span></dt>
              <dd>${escapeHTML(scores.political_establishment_bias?.rationale || '')}</dd>
              <dt>Sosial-mədəni meyl: <span class="value">${scores.socio_cultural_bias?.value ?? 'N/A'}</span></dt>
              <dd>${escapeHTML(scores.socio_cultural_bias?.rationale || '')}</dd>
            </dl>
            <details>
              <summary>Xam JSON datanı göstər</summary>
              <pre>${escapeHTML(JSON.stringify(data, null, 2))}</pre>
            </details>
          </div>
        </div>
      `;

      if (isNewAnalysis && data.hash) {
        const shareableLink = `${window.location.origin}/analysis/${data.hash}`;
        resultHTML += `
          <div class="share-section">
            <h4>Bu Analizi Paylaşın</h4>
            <input type="text" readonly value="${shareableLink}" onclick="this.select();" aria-label="Paylaşım linki" />
          </div>
        `;
        try {
          const ogUrl = document.querySelector('meta[property="og:url"]');
          if (ogUrl) ogUrl.setAttribute('content', shareableLink);
        } catch {}
      }

      resultDiv.innerHTML = resultHTML;
    }

    function escapeHTML(s){
      return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }

    async function analyzeUrl(){
      const url = urlInput.value.trim();
      if (!url || !url.startsWith('http')){
        resultDiv.innerHTML = `<div class="error">Zəhmət olmasa, düzgün bir URL daxil edin.</div>`;
        resultDiv.classList.add('show');
        return;
      }

      analyseBtn.disabled = true;
      analyseBtn.textContent = 'Gözləyin...';
      resultDiv.innerHTML = `<div class="loading"><span class="spinner"></span> <span>Məqalə təhlil olunur… Bu, 45 saniyəyə qədər çəkə bilər.</span></div>`;
      resultDiv.classList.add('show');

      try{
        const response = await fetch('/api/analyze', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url })
        });
        const data = await response.json();

        if (!response.ok){
          if (data.isBlockError){
            resultDiv.innerHTML = `
              <div class="error">
                <p>${data.message}</p>
                <div style="margin-top:15px;">
                  <a href="https://gemini.google.com" target="_blank" rel="noopener noreferrer" class="footer-icons a">
                    Gemini'ni açın və promtu kopyalayın
                  </a>
                </div>
              </div>`;
          } else {
            throw new Error(data.message || \`Server error \${response.status}\`);
          }
        } else {
          displayResult(data);
        }
      } catch (error){
        console.error('Error details:', error);
        resultDiv.innerHTML = `<div class="error">${error.message}</div>`;
      } finally {
        resultDiv.classList.add('show');
        analyseBtn.disabled = false;
        analyseBtn.textContent = 'Təhlil et';
      }
    }

    analyseBtn.addEventListener('click', analyzeUrl);
    urlInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') analyzeUrl(); });
  </script>
</body>
</html>
